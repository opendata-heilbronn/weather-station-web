<html><head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
        <script type="text/javascript" src="http://netdna.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
        <link href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="bootstrap.css" rel="stylesheet" type="text/css">
        <script src="http://d3js.org/d3.v3.min.js" language="JavaScript"></script>
		<script src="liquidFillGauge.js" language="JavaScript"></script>
		<style>
			.liquidFillGaugeText { font-size: 34px; }
		</style>
    </head><body>

<div class="navbar navbar-default navbar-inverse navbar-static-top">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-ex-collapse">
				<span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span>
				<span class="icon-bar"></span></button>
				<a class="navbar-brand" href="#"><span>Sensoren</span></a>
			</div>
			<div class="collapse navbar-collapse" id="navbar-ex-collapse">
				<ul class="nav navbar-nav navbar-right">
					<li class="active">
					<a href="http://coworking-heilbronn.org/"><i class="fa fa-fw text-warning fa-home"></i>Home</a></li>
				</ul>
			</div>
		</div>
	</div>
	<div class="section">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<h1>Coworking Space Heilbronn - <span class="text-danger">Sensordaten</span></h1>
				</div>
			</div>
		</div>
	</div>
	<hr>
	<div class="section">
		<div class="container">
			<div class="row" style="margin-bottom: 20px">
				<h2 class="text-center">Temparaturen</h2>
			</div>
			<div class="row">
				<div class="col-md-4">
					<svg id="sensorOutsideGauge" width="97%" height="250" onclick="NewValueOutside();"></svg>
					<h3 style="font-family: PT Mono" class="text-center">Außen</h3>
				</div>
				<div class="col-md-4">
					<svg id="sensorSouthGauge" width="97%" height="250" onclick="NewValueSouth();"></svg>
					<h3 style="font-family: PT Mono" class="text-center">Innen (Süd)</h3>
				</div>
				<div class="col-md-4">
					<svg id="sensorNorthGauge" width="97%" height="250" onclick="NewValueNorth();"></svg>
					<h3 style="font-family: PT Mono" class="text-center">Innen (Nord)</h3>
				</div>
			</div>
		</div>
	</div>
	<hr>
	<div class="section">
		<div class="container">
			<div class="row" style="margin-bottom: 20px">
				<h2 class="text-center">Luftfeuchtigkeit</h2>
			</div>
			<div class="row">
				<div class="col-md-6">
					<svg id="sensorInsideHumidityGauge" width="97%" height="200" onclick="NewValueInsideHumidity();"></svg>
					<h3 style="font-family: 'PT Mono'" class="text-center">Innen</h3>
				</div>
				<div class="col-md-6">
					<svg id="sensorOutsideHumidityGauge" width="97%" height="200" onclick="NewValueOutsideHumidity();"></svg>
					<h3 style="font-family: 'PT Mono';" class="text-center">Außen</h3>
				</div>
			</div>
		</div>
	</div>
	<hr>
	<div class="section">
		<div class="container">
			<div class="row" style="margin-bottom: 20px">
				<h2 class="text-center">Statistiken</h2>
			</div>
			<div class="row">
				<div class="col-md-12">
					<p style="font-size: 300px" class="text-center"><i class="fa fa-bar-chart"></i></p>
				</div>
			</div>
		</div>
	</div>

<script language="JavaScript">

	// SENSOR NORTH
    var northConfig = liquidFillGaugeDefaultSettings();
    northConfig.circleColor = "#5DCFDC";
    northConfig.textColor = "";
    northConfig.waveTextColor = "#FFAAAA";
    northConfig.waveColor = "#DADC5D";
    northConfig.circleThickness = 0.1;
    northConfig.circleFillGap = 0.2;
    northConfig.textVertPosition = 0.8;
    northConfig.waveAnimateTime = 1200;
    northConfig.waveHeight = 0.08;
    northConfig.displayPercent = false;
    var northGauge= loadLiquidFillGauge("sensorNorthGauge", 0.0, northConfig);
    
    function NewValueNorth(){
        var request = new XMLHttpRequest();
		request.open('GET', 'http://api.grundid.de/sensor?sensorName=cowo.inside2.temperature&size=1', true);
	
		request.onload = function() {
			if (request.status >= 200 && request.status < 400) {
				var data = JSON.parse(request.responseText);
				var sensorValue = data.content[0].value;
				northGauge.update(sensorValue);
			} else {
				
			}	
		};

		request.onerror = function() {
		};

		request.send();

    }

    // SENSOR SOUTH
    var southConfig = liquidFillGaugeDefaultSettings();
    southConfig.circleColor = "#5DCFDC";
    southConfig.textColor = "";
    southConfig.waveTextColor = "#FFAAAA";
    southConfig.waveColor = "#DADC5D";
    southConfig.circleThickness = 0.1;
    southConfig.circleFillGap = 0.2;
    southConfig.textVertPosition = 0.8;
    southConfig.waveAnimateTime = 1200;
    southConfig.waveHeight = 0.08;
    southConfig.displayPercent = false;
    var southGauge= loadLiquidFillGauge("sensorSouthGauge", 0.0, southConfig);
    
    function NewValueSouth(){
        var request = new XMLHttpRequest();
		request.open('GET', 'http://api.grundid.de/sensor?sensorName=cowo.inside1.temperature&size=1', true);
	
		request.onload = function() {
			if (request.status >= 200 && request.status < 400) {
				var data = JSON.parse(request.responseText);
				var sensorValue = data.content[0].value;
				southGauge.update(sensorValue);
			} else {
				
			}	
		};

		request.onerror = function() {
		};

		request.send();

    }

    // SENSOR OUTSIDE
    var outsideConfig = liquidFillGaugeDefaultSettings();
    outsideConfig.circleColor = "#5DCFDC";
    outsideConfig.textColor = "";
    outsideConfig.waveTextColor = "#FFAAAA";
    outsideConfig.waveColor = "#DADC5D";
    outsideConfig.circleThickness = 0.1;
    outsideConfig.circleFillGap = 0.2;
    outsideConfig.textVertPosition = 0.8;
    outsideConfig.waveAnimateTime = 1200;
    outsideConfig.waveHeight = 0.08;
    outsideConfig.displayPercent = false;
    var outsideGauge= loadLiquidFillGauge("sensorOutsideGauge", 0.0, outsideConfig);
    
    function NewValueOutside(){
        var request = new XMLHttpRequest();
		request.open('GET', 'http://api.grundid.de/sensor?sensorName=cowo.outside.temperature&size=1', true);
	
		request.onload = function() {
			if (request.status >= 200 && request.status < 400) {
				var data = JSON.parse(request.responseText);
				var sensorValue = data.content[0].value;
				outsideGauge.update(sensorValue);
			} else {
				
			}	
		};

		request.onerror = function() {
		};

		request.send();

    }

    
    // SENSOR INSIDE HUMIDITY
    var insideHumidityConfig = liquidFillGaugeDefaultSettings();
	insideHumidityConfig.circleColor = "#6EA164";
	insideHumidityConfig.textColor = "";
	insideHumidityConfig.waveTextColor = "#5EB3DA";
	insideHumidityConfig.waveColor = "#5EB3DA";
	insideHumidityConfig.circleThickness = 0.1;
	insideHumidityConfig.circleFillGap = 0.2;
	insideHumidityConfig.textVertPosition = 0.8;
	insideHumidityConfig.waveAnimateTime = 1100;
	insideHumidityConfig.waveHeight = 0.12;
    var insideHumidityGauge= loadLiquidFillGauge("sensorInsideHumidityGauge", 0.0, insideHumidityConfig);
    
    function NewValueInsideHumidity(){
        var request = new XMLHttpRequest();
		request.open('GET', 'http://api.grundid.de/sensor?sensorName=cowo.inside2.humidity&size=1', true);
	
		request.onload = function() {
			if (request.status >= 200 && request.status < 400) {
				var data = JSON.parse(request.responseText);
				var sensorValue = data.content[0].value;
				insideHumidityGauge.update(sensorValue);
			} else {
				
			}	
		};

		request.onerror = function() {
		};

		request.send();
    }


	// SENSOR OUTSIDE HUMIDITY
	var outsideHumidityConfig = liquidFillGaugeDefaultSettings();
	outsideHumidityConfig.circleColor = "#6EA164";
	outsideHumidityConfig.textColor = "";
	outsideHumidityConfig.waveTextColor = "#5EB3DA";
	outsideHumidityConfig.waveColor = "#5EB3DA";
	outsideHumidityConfig.circleThickness = 0.1;
	outsideHumidityConfig.circleFillGap = 0.2;
	outsideHumidityConfig.textVertPosition = 0.8;
	outsideHumidityConfig.waveAnimateTime = 1100;
	outsideHumidityConfig.waveHeight = 0.12;
	var outsideHumidityGauge= loadLiquidFillGauge("sensorOutsideHumidityGauge", 0.0, outsideHumidityConfig);

	function NewValueOutsideHumidity(){
		var request = new XMLHttpRequest();
		request.open('GET', 'http://api.grundid.de/sensor?sensorName=cowo.outside.humidity&size=1', true);

		request.onload = function() {
			if (request.status >= 200 && request.status < 400) {
				var data = JSON.parse(request.responseText);
				var sensorValue = data.content[0].value;
				outsideHumidityGauge.update(sensorValue);
			} else {

			}
		};

		request.onerror = function() {
		};

		request.send();
	}
    
    NewValueNorth();
    NewValueSouth();
    NewValueOutside();
	NewValueInsideHumidity();
	NewValueOutsideHumidity();
</script>
</body></html>
